(this.webpackJsonpbookstore=this.webpackJsonpbookstore||[]).push([[0],{40:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(14),i=n.n(a),o=n(9),s=n(12),u=n(3),j=n(1),l=["#FF008C","#D309E1","#9C1AFF","#7700FF","#4400FF"],p=function(t){var e=t.index,n=t.to,r=t.text,c={border:"2px solid ".concat(l[e])};return Object(j.jsx)("li",{children:Object(j.jsx)(s.b,{to:n,exact:!0,children:Object(j.jsx)("button",{type:"button",className:"btn",style:c,children:r})})},e)},b=function(){var t;return Object(j.jsxs)("nav",{className:"nav",children:[Object(j.jsx)("div",{className:"logo",children:Object(j.jsx)("h1",{children:"Bookstore"})}),Object(j.jsx)("ul",{children:(t=[{id:1,path:"/",text:"Books"},{id:2,path:"/categories",text:"Categories"}],t.map((function(t){return Object(j.jsx)(p,{index:t.id,to:t.path,text:t.text},t.id)})))})]})},d=n(5),h=n.n(d),f=n(10),O=n(24),x=n(15),v=new function t(){var e=this;Object(x.a)(this,t),this.requestApi=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r=t,c={Accept:"*/*","Content-Type":"application/json"},a={method:n,headersList:c};return"GET"===n?r+="?".concat(new URLSearchParams(e).toString()):"DELETE"===n&&(r+="/".concat(e.item_id)),fetch(r,a)},this.getApi=function(){var t=Object(f.a)(h.a.mark((function t(n,r,c){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.requestApi(n,r,"GET");case 2:if(!(a=t.sent).ok){t.next=6;break}return void 0!==c&&c(),t.abrupt("return",a.json());case 6:return t.abrupt("return","");case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),this.postApi=function(){var t=Object(f.a)(h.a.mark((function t(e){var n,r,c,a,i=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r={Accept:"*/*","Content-Type":"application/json"},c=n,t.next=5,fetch(e,{method:"POST",body:JSON.stringify(c),headers:r});case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.deleteApi=function(){var t=Object(f.a)(h.a.mark((function t(n,r){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.requestApi(n,r,"DELETE");case 2:return c=t.sent,t.abrupt("return",c);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},m=new function t(){Object(x.a)(this,t),this.MAIN="https://us-central1-bookstore-api-e63c8.cloudfunctions.net/bookstoreApi/apps/OMlwiHaSBLEL62sFo84R/books"},y="bookStore/books/ADD_BOOK",k="bookStore/books/REMOVE_BOOK",g=[],A=function(t){return{type:y,payload:t}},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:return[].concat(Object(O.a)(t),[e.payload]);case k:return t.filter((function(t){return t.item_id!==e.payload}));default:return t}},E=function(t){var e=Object(o.b)(),n=t.id,r=t.title,c=t.category;return Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{children:["I am a book, my title is:"," ",r]}),Object(j.jsxs)("p",{children:["And my category is:"," ",c]}),Object(j.jsx)("button",{onClick:function(){e(function(t){var e=t.id;return function(){var t=Object(f.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.deleteApi(m.MAIN,{item_id:e});case 2:t.sent.ok&&n({type:k,payload:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({id:n}))},type:"button",children:"Remove me"})]})},N=function(){var t=Object(o.c)((function(t){return t.booksReducer})),e=Object(o.b)();Object(r.useEffect)((function(){e(function(){var t=Object(f.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.getApi(m.MAIN);case 3:n=t.sent,Object.entries(n).forEach((function(t){var n=t[1][0],r=n.category,c=n.title,a={item_id:t[0],title:c,category:r};e(A(a))})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e(void t.t0);case 10:return t.abrupt("return","done");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())}),[]);var n;return Object(j.jsx)("section",{children:Object(j.jsx)("ul",{children:(n=t,n.map((function(t){return Object(j.jsx)(E,{id:t.item_id,category:t.category,title:t.title},t.item_id)})))})})},_=n(42),C=function(){var t=Object(o.b)(),e=Object(r.useRef)(null),n=Object(r.useRef)(null),c=function(){var r,c,a={item_id:Object(_.a)(),title:null===e||void 0===e||null===(r=e.current)||void 0===r?void 0:r.value,category:null===n||void 0===n||null===(c=n.current)||void 0===c?void 0:c.value};t(function(t){var e=t.item_id,n=t.category,r=t.title;return function(){var t=Object(f.a)(h.a.mark((function t(c){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.postApi(m.MAIN,{item_id:e,category:n,title:r});case 2:t.sent.ok&&c(A({item_id:e,category:n,title:r}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(a))};return Object(j.jsxs)("form",{onSubmit:function(t){t.preventDefault(),c(),e.current.value="",n.current.value=""},children:[Object(j.jsx)("input",{ref:e,type:"text",name:"title",placeholder:"Title"}),Object(j.jsx)("input",{ref:n,type:"text",name:"category",placeholder:"Category"}),Object(j.jsx)("input",{label:"Create",type:"submit",name:"create",value:"Create"})]})},T=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(C,{}),Object(j.jsx)(N,{})]})},F=function(){return Object(j.jsx)("div",{children:"UNDER CONSTRUCTION!"})},R=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("h3",{children:"No match for this page"})})};var S=function(){var t=Object(u.f)();return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(b,{}),Object(j.jsxs)(u.c,{location:t,children:[Object(j.jsx)(u.a,{exact:!0,path:"/",children:Object(j.jsx)(T,{})}),Object(j.jsx)(u.a,{path:"/categories",children:Object(j.jsx)(F,{})}),Object(j.jsx)(u.a,{path:"*",children:Object(j.jsx)(R,{})})]},t.pathname)]})},D=n(16),I=n(23),M=(n(39),Object(D.b)({booksReducer:w})),B=Object(D.c)(M,Object(D.a)(I.a));i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(o.a,{store:B,children:Object(j.jsx)(s.a,{basename:"/bookstore",children:Object(j.jsx)(S,{})})})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.c6ffe21b.chunk.js.map